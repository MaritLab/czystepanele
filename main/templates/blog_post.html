{% extends 'base.html' %}
{% load static %}

{% block title %}{{ post.title }} | Blog czystepanele.pl{% endblock %}

{% block meta %}
  <meta name="description" content="{{ post.intro|truncatewords:25 }}">
{% endblock %}

{% block content %}
<section class="pt-36 sm:pt-40 pb-16 px-4 sm:px-10 lg:px-64 bg-white">

  <!-- HERO -->
  <div class="mb-10 text-center">
    <h1 class="text-4xl sm:text-5xl font-bold text-[#000042] mb-4">{{ post.title }}</h1>

    <div class="flex justify-center gap-4 text-gray-600 text-sm">
      {% if post.category %}
        <span class="bg-gray-100 px-3 py-1 rounded-full">{{ post.category.name }}</span>
      {% endif %}
      <span>{{ post.published|date:"d.m.Y" }}</span>
    </div>
  </div>

  <!-- THUMBNAIL -->
  {% if post.thumbnail %}
    <img src="{{ post.thumbnail.url }}" 
         alt="{{ post.title }}"
         class="rounded-xl w-full mb-10 shadow" loading="lazy">
  {% endif %}

  <!-- TREŚĆ -->
  <article class="prose prose-lg max-w-none mb-16">
    {{ post.content|safe }}
  </article>

  <!-- TAGI -->
  {% if post.tags.all %}
  <div class="mb-16 flex flex-wrap gap-3">
    {% for tag in post.tags.all %}
      <a href="#" class="text-xs bg-blue-50 text-blue-700 px-3 py-1 rounded-md">
        #{{ tag }}
      </a>
    {% endfor %}
  </div>
  {% endif %}

  <!-- GALERIA (opcjonalnie) -->
  {% if post.images.all %}
  <h2 class="text-2xl font-semibold mb-6 text-[#000042]">Galeria</h2>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-20">
    {% for img in post.images.all %}
      <img src="{{ img.image.url }}" class="rounded-lg shadow object-cover w-full aspect-square" loading="lazy">
    {% endfor %}
  </div>
  {% endif %}

</section>

<!-- KOLEJNE WPISY -->
<section class="bg-gray-50 py-20 px-4 sm:px-10 lg:px-16">
  <div class="max-w-7xl mx-auto">

    <h2 class="text-3xl font-bold text-[#000042] mb-10 text-center">Najnowsze artykuły</h2>

    <div class="grid gap-10 sm:grid-cols-2 lg:grid-cols-3">
      {% for item in latest_posts %}
        <a href="{{ item.get_absolute_url }}" class="block bg-white shadow rounded-xl overflow-hidden hover:shadow-lg transition">
          {% if item.thumbnail %}
            <img src="{{ item.thumbnail.url }}" alt="{{ item.title }}" class="w-full h-48 object-cover">
          {% endif %}
          <div class="p-5">
            <h3 class="font-semibold text-lg text-gray-900 mb-2">{{ item.title }}</h3>
            <p class="text-sm text-gray-600">{{ item.intro|truncatewords:18 }}</p>
          </div>
        </a>
      {% endfor %}
    </div>

  </div>
</section>

{% endblock %}
