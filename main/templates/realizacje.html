{% extends 'base.html' %}
{% load static %}

{% block title %}Realizacje | czystepanele.pl{% endblock %}

{% block meta %}
  <meta name="description" content="Zobacz nasze realizacje czyszczenia paneli, okien i innych usÅ‚ug. Estetyka, jakoÅ›Ä‡, efekty. PrzeglÄ…daj konkretne kategorie i zainspiruj siÄ™.">
{% endblock %}

{% block content %}
<section class="relative bg-white pt-36 sm:pt-40 px-4 sm:px-10 lg:px-16">
  <div class="max-w-7xl mx-auto">

    <!-- ðŸ”¹ FILTRY KATEGORII -->
    <div class="flex flex-wrap justify-center gap-3 mb-10">
      <button class="category-filter bg-gray-900 text-white px-4 py-2 rounded-full hover:bg-gray-800 font-medium" data-category-id="all">
        Wszystkie
      </button>
      {% for category in categories %}
        <button class="category-filter bg-gray-200 text-gray-800 px-4 py-2 rounded-full hover:bg-gray-300 font-medium" data-category-id="{{ category.id }}">
          {{ category.name }}
        </button>
      {% endfor %}
    </div>

    <!-- ðŸ”¹ GALERIA PROJEKTÃ“W -->
    <div id="project-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {% for category in categories %}
        {% for project in category.projects.all %}
          <a href="{{ project.get_absolute_url }}" target="_blank"
             class="project-card block bg-white rounded-xl shadow hover:shadow-lg overflow-hidden transition-all"
             data-category-id="{{ category.id }}">
            <div class="relative w-full h-48">
              <img src="{{ project.main_image.url }}" alt="{{ project.title }}" class="absolute inset-0 w-full h-full object-cover" loading="lazy">
            </div>
            <div class="p-4">
              <h3 class="text-lg font-semibold text-gray-900">{{ project.title }}</h3>
              <p class="text-sm text-gray-700">{{ project.company_name }}</p>
              <p class="text-sm text-gray-500">{{ project.location }} &bull; {{ project.date|date:"d.m.Y" }}</p>
            </div>
          </a>
        {% endfor %}
      {% endfor %}
    </div>
  </div>
</section>

<script>
  // ðŸ”¹ Filtrowanie kategorii
  document.querySelectorAll('.category-filter').forEach(button => {
    button.addEventListener('click', () => {
      const selected = button.getAttribute('data-category-id');
      document.querySelectorAll('.project-card').forEach(card => {
        const cat = card.getAttribute('data-category-id');
        if (selected === 'all' || selected === cat) {
          card.classList.remove('hidden');
        } else {
          card.classList.add('hidden');
        }
      });
    });
  });
</script>
{% endblock %}
